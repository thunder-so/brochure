---
title: 'Deploy Astro on AWS'
description: 'Learn how to deploy an Astro static single page application (SPA) on AWS with S3 and CloudFront, leveraging server pre-rendered static pages served from global CDN for optimal performance.'
---

import { Tabs, TabItem } from '@astrojs/starlight/components';

Deploy your static [Astro](https://astro.build/) SPA to AWS with S3 and CloudFront for fast, reliable performance. This guide walks you through configuration and setup to get your site live with Thunder.

## Configure
Update your astro.config.mjs to generate static files:

```ts title="astro.config.mjs"
import { defineConfig } from 'astro/config';
 
export default defineConfig({
  output: 'static',
});
```

## Build Settings

Use the following commands in the build step settings:

<Tabs syncKey="package-manager">
  <TabItem label="npm" icon="seti:npm">
{/* | **Parameter**             | **Value**         |
|---------------------------|-------------------|
| Install Command           | `npm install`    |
| Build Command             | `npm run astro check && npm run astro build`      |
| Output Directory          | `dist`           | */}

```sh title="Install command"
npm install
```
```sh title="Build command"
npm run astro check && npm run astro build
```
```sh title="Output directory"
dist
```
  </TabItem>
  <TabItem label="pnpm" icon="pnpm">
{/* | **Parameter**             | **Value**         |
|---------------------------|-------------------|
| Install Command           | ```pnpm install ```    |
| Build Command             | `pnpm run astro check && pnpm run astro build`      |
| Output Directory          | `dist`           | */}
```sh title="Install command"
npx pnpm install
```
```sh title="Build command"
npx pnpm run astro check && npx pnpm run astro build
```
```sh title="Output directory"
dist
```
  </TabItem>
  <TabItem label="bun" icon="bun">
{/* | **Parameter**             | **Value**         |
|---------------------------|-------------------|
| Install Command           | `bun install`    |
| Build Command             | `bun run astro check && bun run astro build`      |
| Output Directory          | `dist`           | */}
```sh title="Install command"
npx bun install
```
```sh title="Build command"
npx bun run astro check && npx bun run astro build
```
```sh title="Output directory"
dist
```
  </TabItem>
</Tabs>

Thatâ€™s it! Your app will be live on your CloudFront URL as soon as the stack is installed.

## Environment Variables

Define and use environment variables during the build step in a type-safe manner as a string, number, enum, or boolean using the envField helper. 

*Context*: Since you're building an SPA, set the context to <code>client</code>, as these variables will be used in the browser.

*Access*: Use <code>public</code> access for these variables. Never store secret keys or sensitive information in public variables, as they will be exposed in the browser and accessible to anyone.

Additional Properties: You can specify properties like *optional* or *default* in the object, but always ensure sensitive information is not included.

```ts title="astro.config.mjs"
import { defineConfig, envField } from 'astro/config';

export default defineConfig({
	env: {
		schema: {
			CLIENT_API_URL: envField.string({ 
        context: "client",
        access: "public", 
        default: "my-api-url"
      }),
      CLIENT_SECRET: envField.string({ 
        context: "client", 
        access: "public", 
        optional: false 
      }),
		}
	}

  /** */
});
```

To access these in your Astro components:

```ts title="index.astro"
---
import { CLIENT_API_URL, CLIENT_SECRET } from "astro:env/client";

const data = await fetch(`${CLIENT_API_URL}/api`, {
  headers: {
    Authorization: `Bearer ${CLIENT_SECRET}`
  }
})
---
```